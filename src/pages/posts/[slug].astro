---
import { getCollection } from 'astro:content'
import createSlug from '../../lib/createSlug'
import Layout from '@/layouts/Layout.astro'

export async function getStaticPaths() {
  const postEntries = await getCollection('posts')
  return postEntries.map((entry) => ({
    params: { slug: createSlug(entry.data.title, entry.slug) },
    props: { entry },
  }))
}

const { entry } = Astro.props
const { Content } = await entry.render()
---

<Layout title={entry.data.title} description={entry.data.description}>
  <main>
    <article>
      <div class="post-header">
        <h1 class="text-[3rem] font-medium text-[#f2f2f2] mb-4">{entry.data.title}</h1>
        <p class="text-[1.3rem] font-normal text-[#b2b2b2] mb-8">{entry.data.description}</p>
      </div>
      <div class="post-content">
        <Content />
      </div>
    </article>
  </main>
</Layout>

<style>
  .post-content {
    @apply text-[#f2f2f2] leading-7 mt-8;
  }

  .post-content :global(h1),
  .post-content :global(h2),
  .post-content :global(h3),
  .post-content :global(h4),
  .post-content :global(h5),
  .post-content :global(h6) {
    @apply font-medium text-[#f2f2f2] mb-4 mt-8;
  }

  .post-content :global(p) {
    @apply mb-6;
  }

  .post-content :global(a) {
    @apply text-blue-400 hover:underline;
  }

  .post-content :global(ul),
  .post-content :global(ol) {
    @apply mb-6 ml-6;
  }

  .post-content :global(li) {
    @apply mb-2;
  }

  .post-content :global(pre) {
    @apply bg-[#1a1b23] p-4 rounded-md overflow-x-auto mb-6;
  }

  .post-content :global(code) {
    @apply text-[#f2f2f2] font-mono;
  }

  .post-content :global(blockquote) {
    @apply border-l-4 border-[#656b84] pl-4 italic my-6;
  }
</style>
